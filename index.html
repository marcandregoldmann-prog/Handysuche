<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:; manifest-src 'self' data:;">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#f8fafc">
    <meta name="description" content="Handy Such-Tracker - Professional & Modern">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkhhbmR5IFN1Y2gtVHJhY2tlciIsCiAgInNob3J0X25hbWUiOiAiSGFuZHkgVHJhY2tlciIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZjhmYWZjIiwKICAidGhlbWVfY29sb3IiOiAiIzRmNDZlNSIsCiAgIm9yaWVudGF0aW9uIjogInBvcnRyYWl0IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpcUhSbGZIQnZkMmwwYVc5dUx6NDhjM1JsZUhRZ2VEMGlNek16SWlCb1pXbG5hSFE5SWpNek1pSWdabTl1ZEMxemFYcGxQU0kzTXpNaWZIeDhMM1JsZUhRK1BDOXpkbWMrIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lxSFJsZUhCdmQybDBhVzl1THo0OGMzUmxlSFFnZVQwaU5URXlJaUJvWldsbmFIUTlJalV4TWlJZ1ptOXVkQzF6YVhwbFBTSTFNVElpZkh4OEwzUmxlSFErUEM5emRtYysiLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48cmVjdCB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgZmlsbD0iIzRmNDZlNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkeT0iLjM1ZW0iIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTIwIiBmaWxsPSIjZmZmZmZmIj7wn5KXPC90ZXh0Pjwvc3ZnPg==">

    <title>Handy Tracker</title>

    <!-- Dependencies with CrossOrigin Fix -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- CRITICAL FIX: Added crossorigin here -->
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Error Handling & Dependency Check -->
    <script>
        window.onerror = function(msg, url, line, col, error) {
            const errorDiv = document.getElementById('error-display');
            if (errorDiv) {
                errorDiv.style.display = 'block';
                // Clean up the URL to just the filename if possible
                const cleanUrl = url ? url.split('/').pop() : 'inline';

                const entry = document.createElement('div');
                entry.style.marginBottom = '8px';
                entry.style.borderBottom = '1px solid rgba(0,0,0,0.1)';
                entry.style.paddingBottom = '4px';

                const strong = document.createElement('strong');
                strong.textContent = 'Error: ';
                entry.appendChild(strong);

                entry.appendChild(document.createTextNode(msg));
                entry.appendChild(document.createElement('br'));

                const small = document.createElement('small');
                small.style.color = '#666';
                small.textContent = `${cleanUrl}:${line}:${col}`;
                entry.appendChild(small);

                errorDiv.appendChild(entry);
            }
            return false;
        };

        window.addEventListener('load', function() {
            setTimeout(() => {
                if (!window.React || !window.ReactDOM || !window.Babel) {
                    const errorDiv = document.getElementById('error-display');
                    const loader = document.getElementById('loading');
                    if (loader) loader.style.display = 'none';

                    if (errorDiv) {
                        errorDiv.style.display = 'block';

                        const systemError = document.createElement('div');
                        systemError.style.color = '#ef4444';
                        systemError.style.fontWeight = '600';
                        systemError.textContent = 'System Error: Core libraries failed to load.';
                        errorDiv.appendChild(systemError);

                        const retryMsg = document.createElement('p');
                        retryMsg.style.marginTop = '8px';
                        retryMsg.style.fontSize = '0.9em';
                        retryMsg.textContent = 'Please check your internet connection and reload.';
                        errorDiv.appendChild(retryMsg);
                    }
                }
            }, 1000); // Give it a second to initialize
        });
    </script>

    <style>
        :root {
            /* Modern Slate Palette */
            --bg-body: #f8fafc;
            --bg-card: rgba(255, 255, 255, 0.85);
            --bg-card-hover: rgba(255, 255, 255, 0.95);

            --primary: #4f46e5;    /* Indigo 600 */
            --primary-hover: #4338ca; /* Indigo 700 */
            --primary-light: #e0e7ff; /* Indigo 100 */

            --text-main: #0f172a;  /* Slate 900 */
            --text-muted: #64748b; /* Slate 500 */

            --border-glass: rgba(255, 255, 255, 0.6);
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

            --font-main: 'Inter', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            background-image:
                radial-gradient(at 0% 0%, rgba(79, 70, 229, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(14, 165, 233, 0.1) 0px, transparent 50%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-main);
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        #root {
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            position: relative;
        }

        /* Error Display Styles */
        #error-display {
            display: none;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
            padding: 16px;
            background: #fff;
            border-left: 4px solid #ef4444;
            border-radius: 8px;
            color: #1f2937;
            z-index: 10000;
            box-shadow: var(--shadow-lg);
            font-family: monospace;
            font-size: 13px;
        }

        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-muted);
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        /* Utility Classes for React Components */
        .glass-card {
            background: var(--bg-card);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border-glass);
            border-radius: 20px;
            padding: 24px;
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .glass-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            background: var(--primary-hover);
        }

        .btn-secondary {
            background: white;
            color: var(--text-main);
            border: 1px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        .btn-secondary:active {
            transform: scale(0.98);
        }

        .btn-ghost {
            background: transparent;
            color: var(--text-muted);
        }

        .btn-ghost:hover {
            background: rgba(0,0,0,0.05);
            color: var(--text-main);
        }

        .big-button {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
            color: white;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow:
                0 20px 25px -5px rgba(79, 70, 229, 0.4),
                0 10px 10px -5px rgba(79, 70, 229, 0.2);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            margin: 20px auto;
            position: relative;
            overflow: hidden;
        }

        .big-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 60%);
            transform: scale(0);
            transition: transform 0.5s ease-out;
        }

        .big-button:active {
            transform: scale(0.92);
            box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.3);
        }

        .big-button:active::after {
            transform: scale(1);
            transition: 0s;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .stat-item {
            background: rgba(255,255,255,0.5);
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.5);
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-main);
        }

        .stat-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .counter-hero {
            font-size: 6rem;
            font-weight: 700;
            line-height: 1;
            color: var(--text-main);
            letter-spacing: -0.05em;
            margin: 10px 0;
            font-variant-numeric: tabular-nums;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .animate-pop {
            animation: pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: #1e293b;
            color: white;
            padding: 16px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-lg);
            z-index: 100;
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div id="error-display"></div>

    <div id="root">
        <div id="loading">
            <div style="font-size: 24px;">üîÑ</div>
            <div>Lade App...</div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // --- Utils ---
        const safeStorage = {
            getItem: (key) => {
                try { return localStorage.getItem(key); }
                catch (e) { console.warn('Storage Access Error', e); return null; }
            },
            setItem: (key, value) => {
                try { localStorage.setItem(key, value); }
                catch (e) { console.warn('Storage Write Error', e); }
            }
        };

        const achievementsList = {
            1: { title: "Erster Fail! üéâ", text: "Das erste Mal ist immer was Besonderes" },
            2: { title: "Doppelt h√§lt besser ‚úåÔ∏è", text: "Einmal ist keinmal, oder?" },
            3: { title: "Aller guten Dinge sind drei üçÄ", text: "Jetzt wird es langsam ernst." },
            5: { title: "Anf√§nger-Chaos ü§¶", text: "5 Mal? Langsam wird's zur Gewohnheit!" },
            10: { title: "Zehn Finger, zehn Fails üôå", text: "Respekt f√ºr die Best√§ndigkeit!" },
            20: { title: "Zwanzigmal Verpeilt üòµ", text: "Hast du ein Loch in der Tasche?" },
            30: { title: "Drei√üig Suchaktionen üïµÔ∏è", text: "Du solltest Detektiv werden... oder auch nicht." },
            40: { title: "Vierzig Fragezeichen ‚ùì", text: "Vielleicht solltest du es anbinden?" },
            50: { title: "Halbhundert! üéä", text: "Das Handy l√§uft vor dir weg!" },
            60: { title: "Sechzig Sekunden? Nein, Stunden! ‚è±Ô∏è", text: "So viel Zeit beim Suchen verschwendet." },
            70: { title: "Siebzig S√ºnden üòà", text: "Dein Handy hasst dich mittlerweile." },
            80: { title: "Achtzig Ach du Schreck üò±", text: "Bald ist es dreistellig!" },
            90: { title: "Neunzig Nieten üéüÔ∏è", text: "Fast geschafft... leider." },
            100: { title: "Jahrhundert-Fail! üéÜ", text: "Legend√§r schlecht organisiert! Ein Meilenstein!" }
        };

        // --- Validation ---
        function validateAchievements(list) {
            const errors = [];
            Object.entries(list).forEach(([threshold, achievement]) => {
                if (isNaN(threshold)) {
                    errors.push(`Achievement threshold "${threshold}" is not a number.`);
                }
                if (!achievement.title || typeof achievement.title !== 'string') {
                    errors.push(`Achievement for threshold ${threshold} is missing a valid title.`);
                }
                if (!achievement.text || typeof achievement.text !== 'string') {
                    errors.push(`Achievement for threshold ${threshold} is missing a valid text.`);
                }
            });
            return errors;
        }

        try {
            const validationErrors = validateAchievements(achievementsList);
            validationErrors.forEach(err => console.error(err));
        } catch (e) {
            console.error('Achievement validation failed', e);
        }

        // --- Components ---

        function StatBox({ label, value, icon }) {
            return (
                <div className="stat-item">
                    <div style={{ fontSize: '18px', marginBottom: '4px', opacity: 0.8 }}>{icon}</div>
                    <div className="stat-value">{value}</div>
                    <div className="stat-label">{label}</div>
                </div>
            );
        }

        function AchievementToast({ achievement }) {
            if (!achievement) return null;
            return (
                <div style={{
                    position: 'absolute',
                    top: '-60px',
                    left: '0',
                    right: '0',
                    background: '#1e293b',
                    color: 'white',
                    padding: '12px',
                    borderRadius: '12px',
                    textAlign: 'center',
                    boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)',
                    animation: 'fadeIn 0.3s ease-out',
                    zIndex: 20
                }}>
                    <div style={{ fontWeight: '600' }}>üèÜ {achievement.title}</div>
                    <div style={{ fontSize: '12px', opacity: 0.8 }}>{achievement.text}</div>
                </div>
            );
        }

        // --- Audio Helpers ---
        let sharedAudioContext = null;
        const getAudioContext = () => {
            if (!sharedAudioContext && window.AudioContext) {
                sharedAudioContext = new AudioContext();
            }
            if (sharedAudioContext && sharedAudioContext.state === 'suspended') {
                sharedAudioContext.resume();
            }
            return sharedAudioContext;
        };

        const playSadTrombone = (audioContext) => {
            if (!audioContext) return;

            const playNote = (freq, startTime, duration) => {
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.connect(gain);
                gain.connect(audioContext.destination);

                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(freq, startTime);
                // Slide down
                osc.frequency.linearRampToValueAtTime(freq - 20, startTime + duration);

                gain.gain.setValueAtTime(0.3, startTime);
                gain.gain.linearRampToValueAtTime(0, startTime + duration);

                osc.start(startTime);
                osc.stop(startTime + duration);
            };

            const now = audioContext.currentTime;
            playNote(392, now, 0.3);       // G4
            playNote(370, now + 0.3, 0.3); // F#4
            playNote(349, now + 0.6, 0.3); // F4
            playNote(330, now + 0.9, 0.8); // E4 (long)
        };

        const playGlitch = (audioContext) => {
            if (!audioContext) return;
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();

            osc.connect(gain);
            gain.connect(audioContext.destination);

            osc.type = 'square';
            const now = audioContext.currentTime;

            // Rapid random frequency changes
            for(let i = 0; i < 10; i++) {
                osc.frequency.setValueAtTime(200 + Math.random() * 800, now + i * 0.05);
            }

            gain.gain.setValueAtTime(0.2, now);
            gain.gain.exponentialRampToValueAtTime(0.01, now + 0.5);

            osc.start(now);
            osc.stop(now + 0.5);
        };

        const playCartoonFall = (audioContext) => {
            if (!audioContext) return;
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();

            osc.connect(gain);
            gain.connect(audioContext.destination);

            osc.type = 'triangle';
            const now = audioContext.currentTime;

            osc.frequency.setValueAtTime(1000, now);
            osc.frequency.exponentialRampToValueAtTime(100, now + 1); // Slide down

            gain.gain.setValueAtTime(0.2, now);
            gain.gain.linearRampToValueAtTime(0, now + 1);

            osc.start(now);
            osc.stop(now + 1);
        };

        function App() {
            // State
            const [count, setCount] = useState(0);
            const [history, setHistory] = useState([]);
            const [isMuted, setIsMuted] = useState(false);
            const [view, setView] = useState('main'); // 'main', 'stats', 'achievements'
            const [unlocked, setUnlocked] = useState([]);
            const [currentAchievement, setCurrentAchievement] = useState(null);
            const [installPrompt, setInstallPrompt] = useState(null);

            const unlockedSet = useMemo(() => new Set(unlocked), [unlocked]);

            // Load Data
            useEffect(() => {
                const sCount = safeStorage.getItem('searchCount');
                const sHistory = safeStorage.getItem('searchHistory');
                const sMuted = safeStorage.getItem('isMuted');
                const sUnlocked = safeStorage.getItem('unlockedAchievements');

                if (sCount) setCount(parseInt(sCount, 10));
                if (sHistory) setHistory(JSON.parse(sHistory));
                if (sMuted) setIsMuted(sMuted === 'true');
                if (sUnlocked) setUnlocked(JSON.parse(sUnlocked));
            }, []);

            // Save Data
            useEffect(() => {
                safeStorage.setItem('searchCount', count);
                safeStorage.setItem('searchHistory', JSON.stringify(history));
                safeStorage.setItem('isMuted', isMuted);
                safeStorage.setItem('unlockedAchievements', JSON.stringify(unlocked));
            }, [count, history, isMuted, unlocked]);

            // Install Prompt
            useEffect(() => {
                const handler = (e) => {
                    e.preventDefault();
                    setInstallPrompt(e);
                };
                window.addEventListener('beforeinstallprompt', handler);
                return () => window.removeEventListener('beforeinstallprompt', handler);
            }, []);

            const playMockingSound = useCallback(() => {
                if (isMuted) return;
                try {
                    const audioContext = getAudioContext();
                    const sounds = [playSadTrombone, playGlitch, playCartoonFall];
                    const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
                    randomSound(audioContext);
                } catch (e) {
                    console.error("Audio error", e);
                }
            }, [isMuted]);

            const handleSearch = () => {
                const newCount = count + 1;
                setCount(newCount);
                setHistory(prev => [...prev, new Date().toISOString()]);
                playMockingSound();

                // Vibrate
                if (navigator.vibrate) navigator.vibrate(50);

                // Check Achievements
                if (achievementsList[newCount] && !unlockedSet.has(newCount)) {
                    setCurrentAchievement(achievementsList[newCount]);
                    setUnlocked(prev => [...prev, newCount]);
                    setTimeout(() => setCurrentAchievement(null), 4000);
                }
            };

            const handleReset = () => {
                if (window.confirm('Wirklich alles zur√ºcksetzen? ü§î')) {
                    setCount(0);
                    setHistory([]);
                    setUnlocked([]);
                }
            };

            const handleInstall = async () => {
                if (!installPrompt) return;
                installPrompt.prompt();
                const { outcome } = await installPrompt.userChoice;
                if (outcome === 'accepted') setInstallPrompt(null);
            };

            // Stats Calculation
            const stats = useMemo(() => {
                if (history.length === 0) return { today: 0, week: 0, avg: 0, days: 0 };
                
                const now = new Date();
                const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
                const startOfWeek = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000).getTime();
                const firstDate = new Date(history[0]).getTime();

                const today = history.filter(d => new Date(d).getTime() >= startOfDay).length;
                const week = history.filter(d => new Date(d).getTime() >= startOfWeek).length;

                const daysDiff = Math.max(1, Math.floor((now.getTime() - firstDate) / (1000 * 60 * 60 * 24)));
                const avg = (history.length / daysDiff).toFixed(1);

                return { today, week, avg, days: daysDiff };
            }, [history]);

            return (
                <div>
                    {/* Header */}
                    <div className="glass-card" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '16px 24px' }}>
                        <div>
                            <h1 style={{ fontSize: '18px', fontWeight: '700', color: 'var(--primary)' }}>Handy Tracker</h1>
                            <div style={{ fontSize: '12px', color: 'var(--text-muted)' }}>Such-Tracker</div>
                        </div>
                        <button
                            className="btn btn-ghost"
                            onClick={() => setIsMuted(!isMuted)}
                            style={{ padding: '8px', fontSize: '16px' }}
                        >
                            {isMuted ? 'üîá' : 'üîä'}
                        </button>
                    </div>

                    {/* Main Content */}
                    <div className="glass-card" style={{ textAlign: 'center', position: 'relative' }}>
                        <AchievementToast achievement={currentAchievement} />

                        {view === 'main' && (
                            <div style={{ animation: 'fadeIn 0.3s ease-out' }}>
                                <div style={{ fontSize: '14px', color: 'var(--text-muted)', marginBottom: '10px' }}>
                                    GESAMTE SUCHEN
                                </div>
                                <div className="counter-hero animate-pop" key={count}>
                                    {count}
                                </div>

                                <button className="big-button" onClick={handleSearch}>
                                    <span style={{ fontSize: '32px', marginBottom: '8px' }}>üîç</span>
                                    Gefunden!
                                </button>

                                <div style={{ display: 'flex', gap: '8px', justifyContent: 'center', flexWrap: 'wrap', marginTop: '20px' }}>
                                    <button className="btn btn-secondary" onClick={() => setView('stats')}>
                                        üìä Statistik
                                    </button>
                                    <button className="btn btn-secondary" onClick={() => setView('achievements')}>
                                        üèÜ Erfolge
                                    </button>
                                </div>
                            </div>
                        )}

                        {view === 'stats' && (
                            <div style={{ animation: 'fadeIn 0.3s ease-out' }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                                    <h2 style={{ fontSize: '18px', fontWeight: '600' }}>Statistik</h2>
                                    <button className="btn btn-ghost" onClick={() => setView('main')}>‚úï</button>
                                </div>
                                <div className="stat-grid">
                                    <StatBox label="Heute" value={stats.today} icon="üìÖ" />
                                    <StatBox label="7 Tage" value={stats.week} icon="üìâ" />
                                    <StatBox label="√ò pro Tag" value={stats.avg} icon="‚ûó" />
                                    <StatBox label="Tage Gesamt" value={stats.days} icon="‚è≥" />
                                </div>
                                <div style={{ marginTop: '24px', borderTop: '1px solid #e2e8f0', paddingTop: '16px' }}>
                                    <button className="btn btn-ghost" onClick={() => {
                                        if (count > 0) {
                                            setCount(count - 1);
                                            setHistory(prev => prev.slice(0, -1));
                                            setView('main');
                                        }
                                    }} style={{ color: '#ef4444' }}>
                                        R√ºckg√§ngig (-1)
                                    </button>
                                </div>
                            </div>
                        )}

                        {view === 'achievements' && (
                            <div style={{ animation: 'fadeIn 0.3s ease-out', textAlign: 'left' }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
                                    <h2 style={{ fontSize: '18px', fontWeight: '600' }}>Erfolge</h2>
                                    <button className="btn btn-ghost" onClick={() => setView('main')}>‚úï</button>
                                </div>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '12px', maxHeight: '400px', overflowY: 'auto' }}>
                                    {Object.entries(achievementsList).map(([threshold, data]) => {
                                        const isUnlocked = unlockedSet.has(parseInt(threshold));
                                        return (
                                            <div key={threshold} style={{
                                                padding: '12px',
                                                borderRadius: '8px',
                                                background: isUnlocked ? 'rgba(79, 70, 229, 0.05)' : '#f1f5f9',
                                                border: isUnlocked ? '1px solid #c7d2fe' : '1px solid transparent',
                                                opacity: isUnlocked ? 1 : 0.5,
                                                display: 'flex',
                                                alignItems: 'center',
                                                gap: '12px'
                                            }}>
                                                <div style={{ fontSize: '20px' }}>{isUnlocked ? '‚úÖ' : 'üîí'}</div>
                                                <div>
                                                    <div style={{ fontWeight: '600', color: isUnlocked ? '#1e293b' : '#64748b' }}>{data.title}</div>
                                                    <div style={{ fontSize: '12px', color: '#64748b' }}>{data.text}</div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                                <div style={{ marginTop: '24px', borderTop: '1px solid #e2e8f0', paddingTop: '16px', textAlign: 'center' }}>
                                    <button className="btn btn-ghost" onClick={handleReset} style={{ color: '#ef4444' }}>
                                        Alles Zur√ºcksetzen
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>

                    {installPrompt && (
                        <div className="install-prompt">
                            <div>
                                <div style={{ fontWeight: '600' }}>App Installieren</div>
                                <div style={{ fontSize: '12px', opacity: 0.8 }}>Zum Startbildschirm hinzuf√ºgen</div>
                            </div>
                            <button className="btn btn-primary" onClick={handleInstall} style={{ padding: '8px 16px', fontSize: '12px' }}>
                                Installieren
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
